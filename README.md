# PCRe:Battle

## 超异域公主焊接(国服)自动重新挑战工具

![](j.jpg)  跳过劵用完了 qwq

## 0x0
- 因为一些重要功能还没有做完，请勿使用。（当然你也可以提交 PR 帮我w）

## 功能（打钩是已经实现的）
由于游戏版本持续演进，不保证以下功能一直可用并且不会出现意外操作。

- [x] 显示当前战斗状态
  - [x] 场上每个角色的血量
  - [x] 场上每个角色的技能
  - [x] 当前战斗波次
  - [x] 战斗结束评星
- [x] 自动重新挑战
  - [x] 自动点按「下一步」按钮
  - [x] 自动点按「再次挑战」按钮
  - [x] 自动点按「OK」按钮
- [ ] 异常处理
  - [x] 处理灭团情况
  - [ ] 处理体力不足
  - [ ] 处理限定商店弹窗
  - [ ] 处理网络掉线情况
  - [ ] 处理ADB意外断线
  - [ ] 处理分辨率不符合要求
- [ ] 增强功能
  - [x] 点击按钮时，使用随机点击位置
  - [ ] 只读模式（只截图和提醒,不向设备发送点击命令）
  - [ ] 数据统计

## 原理
- 通过 adb 连线获取截图，然后分析截图。
- 根据截图分析结果通过 adb 发送点击屏幕操作。
- 因此，本程序不涉及：
  - 读取、修改 游戏的 内存数据
  - 读取、修改 游戏的 网络数据包
  - 请求 ROOT 权限

## 环境要求
- macOS / Windows / Linux
- 安装 adb 命令，确保 adb 命令可用
- 安装 Python 3 (不支持 2)

## 安装
- 下载 py 脚本文件
- 前往命令行安装必备库
  - `pip3 install opencv-python numpy pandas`

## 运行
- 确保设备支持 1280x720 分辨率，一般模拟器都支持的。其他分辨率设备和模拟器请勿运行，会导致错误或异常操作！
- 打开 USB 调试：
  - 如果是 MuMu 模拟器，[连接方式请看这里](http://mumu.163.com/2017/12/19/25241_730476.html)。
- 运行游戏。
- 前往命令行：
  - `python3 本脚本文件名.py`
- 进图战斗。
- 根据提示按回车继续。
- 不要再动设备。
- 可以随时按 `Ctrl+C` 中止程序。

## 适用范围
- 仅用于 普通PVE 非BOSS 战斗 (3 wave)
- 不可用于其他战斗场景（没有适配，会导致错误或异常操作！）
- 禁止用于任何 PVP 场景

## 协议
- 使用和下载本程序，即表示同意以下协议：
  - 程序使用 GPLv3 开源协议，详见[LICENSE](LICENSE)。
  - 不用于二次开发和嵌入于商用闭源程序。
  - 不基于本程序开发违法外挂程序。
  - 使用本程序所引起的任何游戏相关问题（包括并不限于封号、抽卡只有保底等），作者不承担任何责任。